TARGET_DIR = ../target
LIBDIR = $(TARGET_DIR)/release
ifeq ($(shell uname -s),Darwin)
	STATLIB = libentab.dylib
else
	STATLIB = libentab.so
endif
PKG_LIBS = -L$(LIBDIR) -lentab

all: C_clean

$(SHLIB): $(STATLIB)

$(STATLIB):
	cargo build --release --manifest-path=../Cargo.toml --target-dir $(TARGET_DIR)
	mv ./$(LIBDIR)/$(STATLIB) .

C_clean:
	rm -Rf $(SHLIB) $(STATLIB) $(OBJECTS)

clean:
	rm -Rf $(SHLIB) $(STATLIB) $(OBJECTS) $(TARGET_DIR)
